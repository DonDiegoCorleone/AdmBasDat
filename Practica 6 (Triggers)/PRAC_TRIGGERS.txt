--1.1
CREATE TABLE MENSAJES (
    codigo NUMBER(20) PRIMARY KEY,
    texto VARCHAR2(200));

CREATE TABLE audita_mensajes (
    quien VARCHAR2(20),
    como VARCHAR2(20),
    cuando DATE);

--1.2
CREATE OR REPLACE TRIGGER audita_mensajes
BEFORE INSERT OR UPDATE ON MENSAJES
    BEGIN
    IF INSERTING THEN
    INSERT INTO AUDITA_MENSAJES VALUES(USER,'INSERT',SYSDATE);
    END IF;
    IF UPDATING THEN
    INSERT INTO AUDITA_MENSAJES VALUES(USER,'INSERT',SYSDATE);
    END IF;
END audita_mensajes;

--2
ALTER TABLE MENSAJES ADD TIPO VARCHAR2(30);

INSERT INTO MENSAJES VALUES(1,'BUEN DATO','INFORMACIÓN');
INSERT INTO MENSAJES VALUES(2,'1€ SON 1000 PESETAS','INFORMACIÓN');

INSERT INTO MENSAJES VALUES(3,'TRANQUILO BROCO','RESTRICCION');
INSERT INTO MENSAJES VALUES(4,'RESTRICCION INMINENTE','RESTRICCION');

INSERT INTO MENSAJES VALUES(5,'ERROR BROCO','ERROR');
INSERT INTO MENSAJES VALUES(6,'ILLO ERROR','ERROR');

INSERT INTO MENSAJES VALUES(7,'TEN CUIDAO BROCO','AVISO');
INSERT INTO MENSAJES VALUES(8,'CUCHAME','AVISO');

INSERT INTO MENSAJES VALUES(9,'ILLO AYUDA','AYUDA');
INSERT INTO MENSAJES VALUES(10,'NO EN SERIO AYUDA MANO','AYUDA');

CREATE TABLE MENSAJES_INFO(
TIP